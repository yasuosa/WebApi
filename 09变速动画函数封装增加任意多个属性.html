<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        div {
            width: 200px;
            height: 100px;
            background-color: green;
            position: absolute;
            left: 0;
            top: 50px;
        }
    </style>
</head>
<body>
<input type="button" value="移动到400px" id="btn1">
<div id="dv">

</div>
<!--现在遇到的逆境 都是以后成长的额阶梯-->
<script src="common.js"></script>
<script>

    /**
     * 当前的元素的这个属性要达到的目标的值
     * @param element
     * @param attr
     * @param target
     */
    function animate(element,json) {
        clearInterval(element.timeId);
        element.timeId=setInterval(function () {

            var flag=true;

            for (var key in json){
                var current=parseInt(getStyle(element,key));
                var target=json[key];
                var step=(target-current)/10;
                step=step>0?Math.ceil(step):Math.floor(step);
                current+=step;
                element.style[key]=current+"px";
                if(current!=target){
                    flag=false;
                }
            }

            if(flag){
                clearInterval(element.timeId);
            }

        },20);
    }




    function getStyle(element,attr) {
        return window.getComputedStyle?
            window.getComputedStyle(element,null)[attr]:
            element.currentStyle[attr];
    }
</script>
<script>
    my$("btn1").onclick=function () {
        // var json={
        //     width:800,
        //     height:400,
        //     left:500,
        //     top:600
        // };
        // animate(my$("dv"),json);

        animate(my$("dv"),
            {"width":800,"height":400,"left":500,"top":600});
    };






</script>
</body>
</html>